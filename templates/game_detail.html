{% extends "base.html" %}
{% block content %}

<div class="bg-white shadow rounded-lg p-6 mb-10">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!--game image-->
        <div>
            <img
                src="/static/img/games/{{ game.image }}"
                alt="{{ game.title }} image"
                class="w-full rounded-lg shadow-md object-cover"
            >
        </div>

        <!--game info-->
        <div>
            <h1 class="text-4xl font-bold mb-0.5">{{ game.title }}</h1>
            <p class="text-lg text-gray-600 mb-0.5">{{ game.platform }}</p>

            <h3 class="text-xl font-semibold mb-0">Description</h3>
            <p class="text-gray-700 leading-relaxed mb-6">
                {{ game.description }}
            </p>

            <div class="flex items-center gap-6 -mt-3.5">
            <p class="text-3xl font-extrabold text-blue-s600 text-blue-600">
                £{{ game.price }}
            </p>
            <a
                href="/buy/{{ game.id }}"
                class="bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition font-semibold shadow leading-none pl-6 pr-0"
            >
                Buy Now
            </a>
            <a
                href="/"
                class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded transition shadow-sm leading-none"
            >
                ← Back to Home
            </a>
            </div>
        </div>
    </div>
</div>

<!--review section-->
<div class="mt-10">

    <h2 class="text-3xl font-bold mb-4">Reviews</h2>

    {% if session.user %}
    <form method="POST" class="mb-6 bg-white p-4 rounded-lg shadow">
        <textarea
            name="review"
            class="w-full p-3 border rounded-lg focus:ring focus:ring-blue-300"
            placeholder="Write your review..."
            required></textarea>

        <button
            type="submit"
            class="mt-3 bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700 transition">
            Submit Review
        </button>
    </form>
    {% else %}
    <p class="text-gray-600 mb-6">
        <a href="/login" class="text-blue-600 font-semibold">Log in</a> to leave a review.
    </p>
    {% endif %}

    <div class="space-y-4">
        {% for r in reviews %}
        <div class="bg-white p-4 rounded-lg shadow border border-gray-200">
            <p class="font-semibold text-gray-800">{{ r.user_email }}</p>
            <p class="text-sm text-gray-500">{{ r.timestamp }}</p>
            <p class="mt-2 text-gray-700">{{ r.text }}</p>
        </div>
        {% else %}
        <p class="text-gray-500">No reviews yet. Be the first to leave one!</p>
        {% endfor %}
    </div>

</div>

{% endblock %}
